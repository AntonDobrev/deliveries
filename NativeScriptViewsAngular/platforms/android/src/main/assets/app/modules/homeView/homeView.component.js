"use strict";
var core_1 = require("@angular/core");
var common = require("./shared");
var shared = require("../../shared");
var HomeViewComponent = (function () {
    function HomeViewComponent(_store, _service) {
        this._store = _store;
        this._service = _service;
        this.modes = shared.Modes;
        this.mode = shared.Modes.LIST;
        this.showLoading = true;
    }
    HomeViewComponent.prototype.ngOnInit = function () {
        this._store.loadAll();
    };
    HomeViewComponent.prototype.onSelect = function (args) {
        this._store.select(args.item);
        this.onNavigate(shared.Modes.DETAIL);
    };
    HomeViewComponent.prototype.onSave = function (args) {
        this._store.save(args.item);
        this.onNavigate(this.mode === shared.Modes.ADD ? shared.Modes.LIST : shared.Modes.DETAIL);
    };
    HomeViewComponent.prototype.onDelete = function (args) {
        this._store.delete(args.item);
        this.onNavigate(shared.Modes.LIST);
    };
    HomeViewComponent.prototype.onNavigateBack = function () {
        this.onNavigate(this.mode === shared.Modes.EDIT ? shared.Modes.DETAIL : shared.Modes.LIST);
    };
    HomeViewComponent.prototype.onNavigate = function (mode) {
        if (mode === shared.Modes.ADD) {
            this._store.reset();
        }
        this.mode = mode;
    };
    return HomeViewComponent;
}());
HomeViewComponent = __decorate([
    core_1.Component({
        moduleId: module.id,
        selector: "ns-homeView",
        templateUrl: "homeView.component.html",
        changeDetection: core_1.ChangeDetectionStrategy.OnPush,
        providers: []
    }),
    __metadata("design:paramtypes", [common.HomeViewStore, common.HomeViewService])
], HomeViewComponent);
exports.HomeViewComponent = HomeViewComponent;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaG9tZVZpZXcuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiaG9tZVZpZXcuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxzQ0FBa0c7QUFDbEcsaUNBQW1DO0FBQ25DLHFDQUF1QztBQVd2QyxJQUFhLGlCQUFpQjtJQU8xQiwyQkFDWSxNQUE0QixFQUM1QixRQUFnQztRQURoQyxXQUFNLEdBQU4sTUFBTSxDQUFzQjtRQUM1QixhQUFRLEdBQVIsUUFBUSxDQUF3QjtRQVA1QyxVQUFLLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQztRQVVqQixJQUFJLENBQUMsSUFBSSxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDO1FBQzlCLElBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDO0lBQzVCLENBQUM7SUFFRCxvQ0FBUSxHQUFSO1FBQ0ksSUFBSSxDQUFDLE1BQU0sQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUMxQixDQUFDO0lBRUQsb0NBQVEsR0FBUixVQUFTLElBQUk7UUFDVCxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDOUIsSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0lBQ3pDLENBQUM7SUFFRCxrQ0FBTSxHQUFOLFVBQU8sSUFBSTtRQUNQLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztRQUM1QixJQUFJLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxJQUFJLEtBQUssTUFBTSxDQUFDLEtBQUssQ0FBQyxHQUFHLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQyxJQUFJLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQztJQUM5RixDQUFDO0lBRUQsb0NBQVEsR0FBUixVQUFTLElBQUk7UUFDVCxJQUFJLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDOUIsSUFBSSxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQ3ZDLENBQUM7SUFFRCwwQ0FBYyxHQUFkO1FBQ0ksSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsSUFBSSxLQUFLLE1BQU0sQ0FBQyxLQUFLLENBQUMsSUFBSSxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7SUFDL0YsQ0FBQztJQUVELHNDQUFVLEdBQVYsVUFBVyxJQUFrQjtRQUN6QixFQUFFLENBQUMsQ0FBQyxJQUFJLEtBQUssTUFBTSxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1lBQzVCLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxFQUFFLENBQUM7UUFDeEIsQ0FBQztRQUVELElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxDQUFDO0lBQ3JCLENBQUM7SUFHTCx3QkFBQztBQUFELENBQUMsQUFoREQsSUFnREM7QUFoRFksaUJBQWlCO0lBUjdCLGdCQUFTLENBQUM7UUFDUCxRQUFRLEVBQUUsTUFBTSxDQUFDLEVBQUU7UUFDbkIsUUFBUSxFQUFFLGFBQWE7UUFDdkIsV0FBVyxFQUFFLHlCQUF5QjtRQUN0QyxlQUFlLEVBQUUsOEJBQXVCLENBQUMsTUFBTTtRQUMvQyxTQUFTLEVBQUUsRUFBRTtLQUNoQixDQUFDO3FDQVVzQixNQUFNLENBQUMsYUFBYSxFQUNsQixNQUFNLENBQUMsZUFBZTtHQVRuQyxpQkFBaUIsQ0FnRDdCO0FBaERZLDhDQUFpQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgT25Jbml0LCBDaGFuZ2VEZXRlY3Rpb25TdHJhdGVneSwgRWxlbWVudFJlZiwgVmlld0NoaWxkIH0gZnJvbSBcIkBhbmd1bGFyL2NvcmVcIjtcbmltcG9ydCAqIGFzIGNvbW1vbiBmcm9tIFwiLi9zaGFyZWRcIjtcbmltcG9ydCAqIGFzIHNoYXJlZCBmcm9tIFwiLi4vLi4vc2hhcmVkXCI7XG5pbXBvcnQgeyBBY3Rpb25CYXIgfSBmcm9tIFwidWkvYWN0aW9uLWJhclwiO1xuXG5AQ29tcG9uZW50KHtcbiAgICBtb2R1bGVJZDogbW9kdWxlLmlkLFxuICAgIHNlbGVjdG9yOiBcIm5zLWhvbWVWaWV3XCIsXG4gICAgdGVtcGxhdGVVcmw6IFwiaG9tZVZpZXcuY29tcG9uZW50Lmh0bWxcIixcbiAgICBjaGFuZ2VEZXRlY3Rpb246IENoYW5nZURldGVjdGlvblN0cmF0ZWd5Lk9uUHVzaCxcbiAgICBwcm92aWRlcnM6IFtdXG59KVxuXG5leHBvcnQgY2xhc3MgSG9tZVZpZXdDb21wb25lbnQgaW1wbGVtZW50cyBPbkluaXQge1xuXG4gICAgbW9kZXMgPSBzaGFyZWQuTW9kZXM7XG4gICAgbW9kZTogc2hhcmVkLk1vZGVzO1xuXG4gICAgc2hvd0xvYWRpbmc6IGJvb2xlYW47XG4gICAgXG4gICAgY29uc3RydWN0b3IoXG4gICAgICAgIHByaXZhdGUgX3N0b3JlOiBjb21tb24uSG9tZVZpZXdTdG9yZSxcbiAgICAgICAgcHJpdmF0ZSBfc2VydmljZTogY29tbW9uLkhvbWVWaWV3U2VydmljZVxuICAgICkge1xuXG4gICAgICAgIHRoaXMubW9kZSA9IHNoYXJlZC5Nb2Rlcy5MSVNUO1xuICAgICAgICB0aGlzLnNob3dMb2FkaW5nID0gdHJ1ZTtcbiAgICB9XG5cbiAgICBuZ09uSW5pdCgpIHtcbiAgICAgICAgdGhpcy5fc3RvcmUubG9hZEFsbCgpO1xuICAgIH1cblxuICAgIG9uU2VsZWN0KGFyZ3MpIHtcbiAgICAgICAgdGhpcy5fc3RvcmUuc2VsZWN0KGFyZ3MuaXRlbSk7XG4gICAgICAgIHRoaXMub25OYXZpZ2F0ZShzaGFyZWQuTW9kZXMuREVUQUlMKTtcbiAgICB9XG5cbiAgICBvblNhdmUoYXJncykge1xuICAgICAgICB0aGlzLl9zdG9yZS5zYXZlKGFyZ3MuaXRlbSk7XG4gICAgICAgIHRoaXMub25OYXZpZ2F0ZSh0aGlzLm1vZGUgPT09IHNoYXJlZC5Nb2Rlcy5BREQgPyBzaGFyZWQuTW9kZXMuTElTVCA6IHNoYXJlZC5Nb2Rlcy5ERVRBSUwpO1xuICAgIH1cblxuICAgIG9uRGVsZXRlKGFyZ3MpIHtcbiAgICAgICAgdGhpcy5fc3RvcmUuZGVsZXRlKGFyZ3MuaXRlbSk7XG4gICAgICAgIHRoaXMub25OYXZpZ2F0ZShzaGFyZWQuTW9kZXMuTElTVCk7XG4gICAgfVxuXG4gICAgb25OYXZpZ2F0ZUJhY2soKSB7XG4gICAgICAgIHRoaXMub25OYXZpZ2F0ZSh0aGlzLm1vZGUgPT09IHNoYXJlZC5Nb2Rlcy5FRElUID8gc2hhcmVkLk1vZGVzLkRFVEFJTCA6IHNoYXJlZC5Nb2Rlcy5MSVNUKTtcbiAgICB9XG5cbiAgICBvbk5hdmlnYXRlKG1vZGU6IHNoYXJlZC5Nb2Rlcykge1xuICAgICAgICBpZiAobW9kZSA9PT0gc2hhcmVkLk1vZGVzLkFERCkge1xuICAgICAgICAgICAgdGhpcy5fc3RvcmUucmVzZXQoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMubW9kZSA9IG1vZGU7XG4gICAgfVxuICAgIC8vLyBjb21wb25lbnQgYWRkaXRpb25hbCBtZXRob2RzXG5cbn0iXX0=